{"ast":null,"code":"import _slicedToArray from\"/home/basilaslam/Desktop/Projects/Spotify/spotify-clone/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect}from\"react\";import SpotifyWebApi from\"spotify-web-api-js\";import{useStateValue}from\"./DataProvider\";import Player from\"./Player\";import{getTokenFromResponse}from\"./spotify\";import\"./App.css\";import Login from\"./Login\";var s=new SpotifyWebApi();function App(){var _useStateValue=useStateValue(),_useStateValue2=_slicedToArray(_useStateValue,2),token=_useStateValue2[0].token,dispatch=_useStateValue2[1];useEffect(function(){var hash=getTokenFromResponse();window.location.hash=\"\";var _token=hash.access_token;if(_token){s.setAccessToken(_token);dispatch({type:\"SET_TOKEN\",token:_token});s.getPlaylist(\"37i9dQZF1E39IBRbUQ2UV9\").then(function(response){return dispatch({type:\"SET_DISCOVER_WEEKLY\",discover_weekly:response});});s.getMyTopArtists().then(function(response){return dispatch({type:\"SET_TOP_ARTISTS\",top_artists:response});});dispatch({type:\"SET_SPOTIFY\",spotify:s});s.getMe().then(function(user){dispatch({type:\"SET_USER\",user:user});});s.getUserPlaylists().then(function(playlists){dispatch({type:\"SET_PLAYLISTS\",playlists:playlists});});}},[token,dispatch]);return/*#__PURE__*/React.createElement(\"div\",{className:\"app\"},!token&&/*#__PURE__*/React.createElement(Login,null),token&&/*#__PURE__*/React.createElement(Player,{spotify:s}));}export default App;","map":{"version":3,"sources":["/home/basilaslam/Desktop/Projects/Spotify/spotify-clone/src/App.js"],"names":["React","useEffect","SpotifyWebApi","useStateValue","Player","getTokenFromResponse","Login","s","App","token","dispatch","hash","window","location","_token","access_token","setAccessToken","type","getPlaylist","then","response","discover_weekly","getMyTopArtists","top_artists","spotify","getMe","user","getUserPlaylists","playlists"],"mappings":"8KAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,KAAiC,OAAjC,CACA,MAAOC,CAAAA,aAAP,KAA0B,oBAA1B,CACA,OAASC,aAAT,KAA8B,gBAA9B,CACA,MAAOC,CAAAA,MAAP,KAAmB,UAAnB,CACA,OAASC,oBAAT,KAAqC,WAArC,CACA,MAAO,WAAP,CACA,MAAOC,CAAAA,KAAP,KAAkB,SAAlB,CAEA,GAAMC,CAAAA,CAAC,CAAG,GAAIL,CAAAA,aAAJ,EAAV,CAEA,QAASM,CAAAA,GAAT,EAAe,oBACeL,aAAa,EAD5B,kDACJM,KADI,oBACJA,KADI,CACKC,QADL,oBAGbT,SAAS,CAAC,UAAM,CAEd,GAAMU,CAAAA,IAAI,CAAGN,oBAAoB,EAAjC,CACAO,MAAM,CAACC,QAAP,CAAgBF,IAAhB,CAAuB,EAAvB,CACA,GAAIG,CAAAA,MAAM,CAAGH,IAAI,CAACI,YAAlB,CAEA,GAAID,MAAJ,CAAY,CACVP,CAAC,CAACS,cAAF,CAAiBF,MAAjB,EAEAJ,QAAQ,CAAC,CACPO,IAAI,CAAE,WADC,CAEPR,KAAK,CAAEK,MAFA,CAAD,CAAR,CAKAP,CAAC,CAACW,WAAF,CAAc,wBAAd,EAAwCC,IAAxC,CAA6C,SAACC,QAAD,QAC3CV,CAAAA,QAAQ,CAAC,CACPO,IAAI,CAAE,qBADC,CAEPI,eAAe,CAAED,QAFV,CAAD,CADmC,EAA7C,EAOAb,CAAC,CAACe,eAAF,GAAoBH,IAApB,CAAyB,SAACC,QAAD,QACvBV,CAAAA,QAAQ,CAAC,CACPO,IAAI,CAAE,iBADC,CAEPM,WAAW,CAAEH,QAFN,CAAD,CADe,EAAzB,EAOAV,QAAQ,CAAC,CACPO,IAAI,CAAE,aADC,CAEPO,OAAO,CAAEjB,CAFF,CAAD,CAAR,CAKAA,CAAC,CAACkB,KAAF,GAAUN,IAAV,CAAe,SAACO,IAAD,CAAU,CACvBhB,QAAQ,CAAC,CACPO,IAAI,CAAE,UADC,CAEPS,IAAI,CAAJA,IAFO,CAAD,CAAR,CAID,CALD,EAOAnB,CAAC,CAACoB,gBAAF,GAAqBR,IAArB,CAA0B,SAACS,SAAD,CAAe,CACvClB,QAAQ,CAAC,CACPO,IAAI,CAAC,eADE,CAEPW,SAAS,CAATA,SAFO,CAAD,CAAR,CAID,CALD,EAMD,CACF,CA/CQ,CA+CN,CAACnB,KAAD,CAAQC,QAAR,CA/CM,CAAT,CAiDA,mBACE,2BAAK,SAAS,CAAC,KAAf,EACG,CAACD,KAAD,eAAU,oBAAC,KAAD,MADb,CAEGA,KAAK,eAAI,oBAAC,MAAD,EAAQ,OAAO,CAAEF,CAAjB,EAFZ,CADF,CAMD,CAED,cAAeC,CAAAA,GAAf","sourcesContent":["import React, { useEffect } from \"react\";\nimport SpotifyWebApi from \"spotify-web-api-js\";\nimport { useStateValue } from \"./DataProvider\";\nimport Player from \"./Player\";\nimport { getTokenFromResponse } from \"./spotify\";\nimport \"./App.css\";\nimport Login from \"./Login\";\n\nconst s = new SpotifyWebApi();\n\nfunction App() {\n  const [{ token }, dispatch]=useStateValue();\n\n  useEffect(() => {\n    \n    const hash = getTokenFromResponse();\n    window.location.hash = \"\";\n    let _token = hash.access_token;\n\n    if (_token) {\n      s.setAccessToken(_token);\n\n      dispatch({\n        type: \"SET_TOKEN\",\n        token: _token,\n      });\n\n      s.getPlaylist(\"37i9dQZF1E39IBRbUQ2UV9\").then((response) =>\n        dispatch({\n          type: \"SET_DISCOVER_WEEKLY\",\n          discover_weekly: response,\n        })\n      );\n\n      s.getMyTopArtists().then((response) =>\n        dispatch({\n          type: \"SET_TOP_ARTISTS\",\n          top_artists: response,\n        })\n      );\n\n      dispatch({\n        type: \"SET_SPOTIFY\",\n        spotify: s,\n      });\n\n      s.getMe().then((user) => {\n        dispatch({\n          type: \"SET_USER\",\n          user,\n        });\n      });\n\n      s.getUserPlaylists().then((playlists) => {\n        dispatch({\n          type:\"SET_PLAYLISTS\",\n          playlists,\n        });\n      });\n    }\n  }, [token, dispatch]);\n\n  return (\n    <div className=\"app\">\n      {!token && <Login />}\n      {token && <Player spotify={s} />}\n    </div>\n  );\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}